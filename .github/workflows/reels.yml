name: AI Empire - Auto Reels Every 4 Hours

on:
  schedule:
    # [span_0](start_span)سيتم التشغيل آلياً كل 4 ساعات[span_0](end_span)
    - cron: '0 */4 * * *'
  workflow_dispatch: # للتشغيل اليدوي الفوري

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install System Dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y ffmpeg fonts-dejavu
          # [span_1](start_span)تم تثبيت FFmpeg كبديل لـ MoviePy لضمان الجودة[span_1](end_span)

      - name: Install Python Packages
        run: |
          pip install requests ffmpeg-python Pillow google-generativeai python-dotenv
          # [span_2](start_span)هذه المكتبات ضرورية لتشغيل محرك الذكاء الاصطناعي[span_2](end_span)

      - name: Execute Empire Engine
        env:
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
          PEXELS_KEY: ${{ secrets.PEXELS_KEY }}
          FB_PAGE_ID: ${{ secrets.FB_PAGE_ID }}
          FB_PAGE_TOKEN: ${{ secrets.FB_PAGE_TOKEN }}
        run: python main.py
